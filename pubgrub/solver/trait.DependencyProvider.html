<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Trait that allows the algorithm to retrieve available packages and their dependencies. An implementor needs to be supplied to the resolve function."><title>DependencyProvider in pubgrub::solver - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-9ee3a5e31a2afa3e.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="pubgrub" data-themes="" data-resource-suffix="" data-rustdoc-version="1.75.0-nightly (a2f5f9691 2023-11-02)" data-channel="nightly" data-search-js="search-8fbf244ebcf71464.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-9dd44ab47b99a0fb.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../pubgrub/index.html">pubgrub</a><span class="version">0.2.1</span></h2></div><h2 class="location"><a href="#">DependencyProvider</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.choose_package_version">choose_package_version</a></li><li><a href="#tymethod.get_dependencies">get_dependencies</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.should_cancel">should_cancel</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In pubgrub::solver</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../index.html">pubgrub</a>::<wbr><a href="index.html">solver</a>::<wbr><a class="trait" href="#">DependencyProvider</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/pubgrub/solver.rs.html#209-257">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait DependencyProvider&lt;P: <a class="trait" href="../package/trait.Package.html" title="trait pubgrub::package::Package">Package</a>, VS: <a class="trait" href="../version_set/trait.VersionSet.html" title="trait pubgrub::version_set::VersionSet">VersionSet</a>&gt; {
    // Required methods
    fn <a href="#tymethod.choose_package_version" class="fn">choose_package_version</a>&lt;T: <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;P&gt;, U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;VS&gt;&gt;(
        &amp;self,
        potential_packages: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(T, U)</a>&gt;
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;(T, <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;VS::<a class="associatedtype" href="../version_set/trait.VersionSet.html#associatedtype.V" title="type pubgrub::version_set::VersionSet::V">V</a>&gt;), <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_dependencies" class="fn">get_dependencies</a>(
        &amp;self,
        package: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;P</a>,
        version: &amp;VS::<a class="associatedtype" href="../version_set/trait.VersionSet.html#associatedtype.V" title="type pubgrub::version_set::VersionSet::V">V</a>
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="enum.Dependencies.html" title="enum pubgrub::solver::Dependencies">Dependencies</a>&lt;P, VS&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>&gt;&gt;;

    // Provided method
    fn <a href="#method.should_cancel" class="fn">should_cancel</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>&gt;&gt; { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Trait that allows the algorithm to retrieve available packages and their dependencies.
An implementor needs to be supplied to the <a href="fn.resolve.html" title="fn pubgrub::solver::resolve">resolve</a> function.</p>
</div></details><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.choose_package_version" class="method"><a class="src rightside" href="../../src/pubgrub/solver.rs.html#236-239">source</a><h4 class="code-header">fn <a href="#tymethod.choose_package_version" class="fn">choose_package_version</a>&lt;T: <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;P&gt;, U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;VS&gt;&gt;(
    &amp;self,
    potential_packages: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(T, U)</a>&gt;
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;(T, <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;VS::<a class="associatedtype" href="../version_set/trait.VersionSet.html#associatedtype.V" title="type pubgrub::version_set::VersionSet::V">V</a>&gt;), <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>&gt;&gt;</h4></section></summary><div class="docblock"><p><a href="https://github.com/dart-lang/pub/blob/master/doc/solver.md#decision-making">Decision making</a>
is the process of choosing the next package
and version that will be appended to the partial solution.
Every time such a decision must be made,
potential valid packages and sets of versions are preselected by the resolver,
and the dependency provider must choose.</p>
<p>The strategy employed to choose such package and version
cannot change the existence of a solution or not,
but can drastically change the performances of the solver,
or the properties of the solution.
The documentation of Pub (PubGrub implementation for the dart programming language)
states the following:</p>
<blockquote>
<p>Pub chooses the latest matching version of the package
with the fewest versions that match the outstanding constraint.
This tends to find conflicts earlier if any exist,
since these packages will run out of versions to try more quickly.
But there’s likely room for improvement in these heuristics.</p>
</blockquote>
<p>A helper function <a href="fn.choose_package_with_fewest_versions.html" title="fn pubgrub::solver::choose_package_with_fewest_versions">choose_package_with_fewest_versions</a> is provided to ease
implementations of this method if you can produce an iterator
of the available versions in preference order for any package.</p>
<p>Note: the type <code>T</code> ensures that this returns an item from the <code>packages</code> argument.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.get_dependencies" class="method"><a class="src rightside" href="../../src/pubgrub/solver.rs.html#243-247">source</a><h4 class="code-header">fn <a href="#tymethod.get_dependencies" class="fn">get_dependencies</a>(
    &amp;self,
    package: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;P</a>,
    version: &amp;VS::<a class="associatedtype" href="../version_set/trait.VersionSet.html#associatedtype.V" title="type pubgrub::version_set::VersionSet::V">V</a>
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="enum.Dependencies.html" title="enum pubgrub::solver::Dependencies">Dependencies</a>&lt;P, VS&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Retrieves the package dependencies.
Return <a href="enum.Dependencies.html#variant.Unknown" title="variant pubgrub::solver::Dependencies::Unknown">Dependencies::Unknown</a> if its dependencies are unknown.</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.should_cancel" class="method"><a class="src rightside" href="../../src/pubgrub/solver.rs.html#254-256">source</a><h4 class="code-header">fn <a href="#method.should_cancel" class="fn">should_cancel</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>This is called fairly regularly during the resolution,
if it returns an Err then resolution will be terminated.
This is helpful if you want to add some form of early termination like a timeout,
or you want to add some form of user feedback if things are taking a while.
If not provided the resolver will run as long as needed.</p>
</div></details></div><h2 id="object-safety" class="small-section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-DependencyProvider%3CP,+VS%3E-for-OfflineDependencyProvider%3CP,+VS%3E" class="impl"><a class="src rightside" href="../../src/pubgrub/solver.rs.html#359-388">source</a><a href="#impl-DependencyProvider%3CP,+VS%3E-for-OfflineDependencyProvider%3CP,+VS%3E" class="anchor">§</a><h3 class="code-header">impl&lt;P: <a class="trait" href="../package/trait.Package.html" title="trait pubgrub::package::Package">Package</a>, VS: <a class="trait" href="../version_set/trait.VersionSet.html" title="trait pubgrub::version_set::VersionSet">VersionSet</a>&gt; <a class="trait" href="trait.DependencyProvider.html" title="trait pubgrub::solver::DependencyProvider">DependencyProvider</a>&lt;P, VS&gt; for <a class="struct" href="struct.OfflineDependencyProvider.html" title="struct pubgrub::solver::OfflineDependencyProvider">OfflineDependencyProvider</a>&lt;P, VS&gt;</h3></section><div class="docblock"><p>An implementation of <a href="trait.DependencyProvider.html" title="trait pubgrub::solver::DependencyProvider">DependencyProvider</a> that
contains all dependency information available in memory.
Packages are picked with the fewest versions contained in the constraints first.
Versions are picked with the newest versions first.</p>
</div></div><script src="../../trait.impl/pubgrub/solver/trait.DependencyProvider.js" async></script></section></div></main></body></html>